(window.webpackJsonp=window.webpackJsonp||[]).push([[18,3,8],{250:function(t,e,n){var content=n(253);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(106).default)("21e0c587",content,!0,{sourceMap:!1})},251:function(t,e,n){var content=n(256);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(106).default)("7031ffbc",content,!0,{sourceMap:!1})},252:function(t,e,n){"use strict";n(250)},253:function(t,e,n){var o=n(105)((function(i){return i[1]}));o.push([t.i,"/*purgecss start ignore*/\n.connector[data-v-41b9d66d]{\n  fill:none;\n  stroke:#000;\n  stroke-width:3px\n}\n.zz-point[data-v-41b9d66d]{\n  fill:rgba(30,144,255,.2);\n  stroke:#1e90ff;\n  stroke-width:1;\n  cursor:pointer\n}\n.zz-handle[data-v-41b9d66d]{\n  fill:rgba(0,0,0,.2);\n  cursor:pointer\n}\n.zz-handle[data-v-41b9d66d],.zz-handleline[data-v-41b9d66d]{\n  stroke:silver;\n  stroke-width:1\n}\ntext[data-v-41b9d66d]{\n  -webkit-user-select:none;\n     -moz-user-select:none;\n      -ms-user-select:none;\n          user-select:none\n}\n\n/*purgecss end ignore*/",""]),o.locals={},t.exports=o},254:function(t,e,n){"use strict";n.r(e);n(107);var o={props:{sp:{type:Object,required:!0},ep:{type:Object,required:!0}},computed:{sh:function(){return{x:(this.sp.x+this.ep.x)/2,y:this.sp.y}},eh:function(){return{x:(this.sp.x+this.ep.x)/2,y:this.ep.y}},connectorData:function(){var t=this.sp,e=this.sh,n=this.eh,o=this.ep;return"M".concat(t.x,",").concat(t.y," C").concat(e.x,",").concat(e.y," ").concat(n.x,",").concat(n.y," ").concat(o.x,",").concat(o.y)}}},r=(n(252),n(45)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",[n("path",{staticClass:"connector",attrs:{d:t.connectorData}})])}),[],!1,null,"41b9d66d",null);e.default=component.exports},255:function(t,e,n){"use strict";n(251)},256:function(t,e,n){var o=n(105)((function(i){return i[1]}));o.push([t.i,"/*purgecss start ignore*/\n.cc-QuestBox[data-v-d4ccbfc8]{\n  background-color:hsla(0,0%,100%,.9);\n  -webkit-backdrop-filter:blur(2px);\n          backdrop-filter:blur(2px)\n}\n\n/*purgecss end ignore*/",""]),o.locals={},t.exports=o},258:function(t,e,n){"use strict";n.r(e);var o={props:{obj:{type:Object,required:!0}}},r=(n(255),n(45)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cc-QuestBox border"},[t._m(0),t._v(" "),n("div",{staticClass:"body px-2 py-2"},[n("ul",{staticClass:"list-inside pl-2 text-sm"},t._l(t.obj.reqs,(function(e,o){return n("li",{key:o},[t._v(t._s(e))])})),0)])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title border-b"},[n("div",{staticClass:"flex items-center justify-between"},[n("div",{staticClass:"px-2 py-1 font-bold"},[t._v("Title")]),t._v(" "),n("div",{staticClass:"px-2"},[t._v("100%")])])])}],!1,null,"d4ccbfc8",null);e.default=component.exports},283:function(t,e,n){var content=n(308);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(106).default)("d234a88e",content,!0,{sourceMap:!1})},307:function(t,e,n){"use strict";n(283)},308:function(t,e,n){var o=n(105)((function(i){return i[1]}));o.push([t.i,"/*purgecss start ignore*/\nbody{\n  background-color:#e8eaed\n}\n#canvas{\n  position:relative;\n  width:100%\n}\nsvg{\n  border:1px solid #eee;\n  box-shadow:0 2px 12px 4px rgba(0,0,0,.01);\n  margin:0 auto;\n  background-color:#f8fafd\n}\n#spz-pan{\n  bottom:10px\n}\n#spz-pan,#toolbar{\n  position:absolute;\n  left:10px\n}\n#toolbar{\n  bottom:50px\n}\n\n/*purgecss end ignore*/",""]),o.locals={},t.exports=o},317:function(t,e,n){"use strict";n.r(e);n(40),n(25),n(39),n(14),n(61),n(29),n(62);var o=n(21),r=n(22),c=(n(257),n(46),n(184),n(107),n(76)),l=n(265),d=n.n(l);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={name:"Step9Page",data:function(){return{ready:!1,spz:null,spzState:"enabled",scaledMouseX:0,scaledMouseY:0,isDragging:!1,dragProp:"",dragOffset:{x:0,y:0}}},computed:h(h({},Object(c.b)({questBoxSet:"quest/questBoxSet",questBonds:"quest/questBonds"})),{},{skeletonSet:function(){var t=this.questBoxSet;return Object.fromEntries(Object.entries(t).map((function(t){for(var e=Object(o.a)(t,2),n=e[0],r=e[1],c=r.x,l=r.y,d=r.reqs,f=[],h=60,i=0;i<d.length;i++)f.push({x:c,y:l+20*i+53}),h+=18;return[n,{mx:c,my:l,in:f,out:{x:c+160,y:l+18},h:h}]})))},lines:function(){var t=this;return this.questBonds.map((function(b){var e=t.skeletonSet[b.src],n=t.skeletonSet[b.dst];return{sp:e.out,ep:n.in[b.dstidx]}}))},scaledMouseXLine:function(){var t=this.scaledMouseX,e=this.scaledMouseY;return"M".concat(t,",").concat(e-100," L").concat(t,",").concat(e+100)},scaledMouseYLine:function(){var t=this.scaledMouseX,e=this.scaledMouseY;return"M".concat(t-100,",").concat(e," L").concat(t+100,",").concat(e)}}),mounted:function(){this.init()},methods:{init:function(){this.spz=d()("#svg",{controlIconsEnabled:!0,zoomScaleSensitivity:.3,minZoom:.1}),this.ready=!0},toggleSpzPan:function(){this.spz.isPanEnabled()?this.disableSpzPan():this.enableSpzPan()},enableSpzPan:function(){this.spz.enablePan(),this.spz.enableZoom(),this.spz.enableDblClickZoom(),this.spzState="enabled"},disableSpzPan:function(){this.spz.disablePan(),this.spz.disableZoom(),this.spz.disableDblClickZoom(),this.spzState="disabled"},dragStart:function(t,e){t.stopPropagation(),this.disableSpzPan(),this.isDragging=!0,this.dragProp=e;var n=t.offsetX,o=t.offsetY;this.dragOffset={x:n,y:o}},dragStop:function(){this.isDragging=!1},onMousemove:function(t){if(this.refreshMousePos(t),this.isDragging&&this.dragProp&&!this.spz.isPanEnabled()){var e={name:this.dragProp,x:this.scaledMouseX-this.dragOffset.x,y:this.scaledMouseY-this.dragOffset.y};this.$store.dispatch("quest/changeQuestItem",e)}},refreshMousePos:function(t){var e=t.x,n=t.y,o=this.detectMatrix(),r=(e-o.transX)/o.scaleX,c=(n-o.transY)/o.scaleY;this.scaledMouseX=r,this.scaledMouseY=c},detectMatrix:function(){var t=this.$el.querySelector(".svg-pan-zoom_viewport").transform.baseVal.consolidate().matrix;return{scaleX:t.a,scaleY:t.d,transX:t.e,transY:t.f}},newItem:function(){this.$store.dispatch("quest/addQuestItem")}}},x=(n(307),n(45)),component=Object(x.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[n("div",{attrs:{id:"canvas"}},[n("svg",{attrs:{id:"svg",width:"100vw",height:"100vh",xmlns:"http://www.w3.org/2000/svg"},on:{mousemove:t.onMousemove,pointerup:t.dragStop}},[n("g",{on:{pointerdown:t.enableSpzPan}},[n("g",[n("path",{attrs:{d:t.scaledMouseXLine,stroke:"cyan"}}),t._v(" "),n("path",{attrs:{d:t.scaledMouseYLine,stroke:"cyan"}})]),t._v(" "),t._l(t.lines,(function(t,e){return[n("auto-bezier",{key:"bez-"+e,attrs:{sp:t.sp,ep:t.ep}})]})),t._v(" "),t._l(t.questBoxSet,(function(b,e){return[n("foreignObject",{key:"fo-"+e,attrs:{width:"160",height:"160",x:b.x,y:b.y},on:{pointerdown:function(n){return t.dragStart(n,e)}}},[n("node-box2",{attrs:{obj:b}})],1)]})),t._v(" "),t._l(t.skeletonSet,(function(e,o){return[n("g",{key:"ske-"+o},[n("text",{attrs:{x:e.mx,y:e.my-5,"font-size":"10",fill:"red"}},[t._v("\n              "+t._s(o)+" / x:"+t._s(e.mx)+" y:"+t._s(e.my)+"\n            ")]),t._v(" "),n("rect",{attrs:{width:"160",height:e.h,x:e.mx,y:e.my,fill:"none",stroke:"red"}}),t._v(" "),t._l(e.in,(function(t,e){return n("g",{key:"inp-"+e},[n("circle",{attrs:{cx:t.x,cy:t.y,r:"5",fill:"red"}})])})),t._v(" "),n("circle",{attrs:{cx:e.out.x,cy:e.out.y,r:"5",fill:"orange"}})],2)]}))],2)]),t._v(" "),t.ready?n("div",{attrs:{id:"spz"}},[n("button",{staticClass:"border bg-indigo-100 px-2",attrs:{id:"spz-pan"},on:{click:t.toggleSpzPan}},[t._v("\n        Controll: "+t._s(t.spzState)+"\n      ")])]):t._e(),t._v(" "),n("div",{attrs:{id:"toolbar"}},[n("button",{staticClass:"border px-2",on:{click:t.newItem}},[t._v("new")])])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{AutoBezier:n(254).default,NodeBox2:n(258).default})}}]);